/* src/styles/components/background-topo.css */

/* --- MASTER BG --- */
.bg-master {
    position: fixed;
    inset: 0;
    z-index: -1;
    background-color: var(--color-primary);
    overflow: hidden;
    /* Ensure minimal overflow issues */
}

.bg-layer {
    position: absolute;
    inset: -50%;
    /* Make layers larger to allow rotation without edges showing */
    width: 200%;
    height: 200%;
    pointer-events: none;
}

/* =========================================
   EFFECT 6: TOPOGRAFÍA RANDOM (FINAL)
   ========================================= */
.topo-layer,
.topo-layer-2 {
    background-image: url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='topo' x='0' y='0' width='100' height='100' patternUnits='userSpaceOnUse'%3E%3Cpath d='M0 100 Q 25 50 50 100 T 100 100 M0 75 Q 25 25 50 75 T 100 75 M0 50 Q 25 0 50 50 T 100 50 M0 25 Q 25 -25 50 25 T 100 25' fill='none' stroke='white' stroke-width='1' opacity='1'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='1000%' height='1000%' fill='url(%23topo)'/%3E%3C/svg%3E");
    background-size: 600px 600px;
    will-change: transform, background-position;
}

/* CAPA 1: Base */
.topo-layer {
    opacity: 0.07;
    animation: topoFlow 120s linear infinite;
}

/* CAPA 2: Interferencia (Rotada y escalada) */
.topo-layer-2 {
    opacity: 0.05;
    transform: rotate(15deg) scale(1.2);
    animation: topoFlowReverse 160s linear infinite;
    background-size: 800px 800px;
}

/* --- LIGHT MODE FIX --- */
:root[data-theme="light"] .topo-layer,
:root[data-theme="light"] .topo-layer-2,
html[data-theme="light"] .topo-layer,
html[data-theme="light"] .topo-layer-2 {
    filter: invert(1) brightness(0.2);
    /* Forzamos a que las líneas sean más oscuras */
    opacity: 0.042;
    /* Visible but subtle gray lines */
}

/* --- DARK MODE SPECIFIC ADJUSTMENTS (Explicit) --- */
:global([data-theme="dark"]) .topo-layer {
    opacity: 0.09;
}

:global([data-theme="dark"]) .topo-layer-2 {
    opacity: 0.07;
}

@keyframes topoFlow {
    from {
        background-position: 0 0;
    }

    to {
        background-position: 600px 600px;
    }
}

@keyframes topoFlowReverse {
    from {
        background-position: 0 0;
    }

    to {
        background-position: -800px 400px;
    }
}